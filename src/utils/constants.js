// Database Lokasi untuk Jawa Timur (Situbondo, Bondowoso, Probolinggo)
export const LOCATIONS_DATABASE = {
  // KABUPATEN PROBOLINGGO
  // Kecamatan Paiton
  Karanganyar: { lat: -7.71, lng: 113.48, type: 'Desa', kec: 'Paiton', kab: 'Probolinggo' },
  Randutatah: { lat: -7.7105, lng: 113.485, type: 'Desa', kec: 'Paiton', kab: 'Probolinggo' },
  Sumberanyar: { lat: -7.708, lng: 113.482, type: 'Desa', kec: 'Paiton', kab: 'Probolinggo' },
  Alastengah: { lat: -7.712, lng: 113.49, type: 'Desa', kec: 'Paiton', kab: 'Probolinggo' },
  'Pondok Kelor': { lat: -7.715, lng: 113.475, type: 'Desa', kec: 'Paiton', kab: 'Probolinggo' },

  // Kecamatan Kraksaan
  Kraksaan: { lat: -7.7478, lng: 113.3956, type: 'Kecamatan', kec: 'Kraksaan', kab: 'Probolinggo' },
  Patokan: { lat: -7.75, lng: 113.4, type: 'Desa', kec: 'Kraksaan', kab: 'Probolinggo' },
  Kandang: { lat: -7.745, lng: 113.39, type: 'Desa', kec: 'Kraksaan', kab: 'Probolinggo' },

  // Kecamatan Gending
  Gending: { lat: -7.6833, lng: 113.5167, type: 'Kecamatan', kec: 'Gending', kab: 'Probolinggo' },
  Kaligoro: { lat: -7.685, lng: 113.52, type: 'Desa', kec: 'Gending', kab: 'Probolinggo' },
  Sumberejo: { lat: -7.68, lng: 113.51, type: 'Desa', kec: 'Gending', kab: 'Probolinggo' },

  // Kecamatan Tongas
  Tongas: { lat: -7.8167, lng: 113.45, type: 'Kecamatan', kec: 'Tongas', kab: 'Probolinggo' },
  Curahsawo: { lat: -7.82, lng: 113.455, type: 'Desa', kec: 'Tongas', kab: 'Probolinggo' },

  // Kecamatan Leces
  Leces: { lat: -7.7167, lng: 113.3667, type: 'Kecamatan', kec: 'Leces', kab: 'Probolinggo' },
  'Sumber Waru': { lat: -7.72, lng: 113.37, type: 'Desa', kec: 'Leces', kab: 'Probolinggo' },

  // KABUPATEN SITUBONDO
  // Kecamatan Situbondo
  Situbondo: { lat: -7.7063, lng: 114.0095, type: 'Kabupaten', kec: 'Situbondo', kab: 'Situbondo' },
  Panji: { lat: -7.72, lng: 114.02, type: 'Desa', kec: 'Situbondo', kab: 'Situbondo' },
  Olean: { lat: -7.71, lng: 114.01, type: 'Desa', kec: 'Situbondo', kab: 'Situbondo' },
  Mimbaan: { lat: -7.7, lng: 114.0, type: 'Desa', kec: 'Situbondo', kab: 'Situbondo' },

  // Kecamatan Panarukan
  Panarukan: { lat: -7.7011, lng: 113.9189, type: 'Kecamatan', kec: 'Panarukan', kab: 'Situbondo' },
  'Curah Tatal': { lat: -7.705, lng: 113.92, type: 'Desa', kec: 'Panarukan', kab: 'Situbondo' },
  Patemon: { lat: -7.698, lng: 113.915, type: 'Desa', kec: 'Panarukan', kab: 'Situbondo' },

  // Kecamatan Asembagus
  Asembagus: { lat: -7.6333, lng: 114.0167, type: 'Kecamatan', kec: 'Asembagus', kab: 'Situbondo' },
  'Curah Cottok': { lat: -7.635, lng: 114.02, type: 'Desa', kec: 'Asembagus', kab: 'Situbondo' },
  'Pondok Joyo': { lat: -7.63, lng: 114.01, type: 'Desa', kec: 'Asembagus', kab: 'Situbondo' },

  // Kecamatan Banyuputih
  Banyuputih: { lat: -7.8167, lng: 114.1, type: 'Kecamatan', kec: 'Banyuputih', kab: 'Situbondo' },
  Sumberejo: { lat: -7.82, lng: 114.105, type: 'Desa', kec: 'Banyuputih', kab: 'Situbondo' },

  // Kecamatan Besuki
  Besuki: { lat: -7.7333, lng: 113.6833, type: 'Kecamatan', kec: 'Besuki', kab: 'Situbondo' },
  Demung: { lat: -7.735, lng: 113.685, type: 'Desa', kec: 'Besuki', kab: 'Situbondo' },

  // KABUPATEN BONDOWOSO
  // Kecamatan Bondowoso
  Bondowoso: { lat: -7.9138, lng: 113.8186, type: 'Kabupaten', kec: 'Bondowoso', kab: 'Bondowoso' },
  Kademangan: { lat: -7.92, lng: 113.82, type: 'Desa', kec: 'Bondowoso', kab: 'Bondowoso' },
  Badean: { lat: -7.91, lng: 113.81, type: 'Desa', kec: 'Bondowoso', kab: 'Bondowoso' },
  Kotakulon: { lat: -7.915, lng: 113.815, type: 'Desa', kec: 'Bondowoso', kab: 'Bondowoso' },

  // Kecamatan Grujugan
  Grujugan: { lat: -7.85, lng: 113.8, type: 'Kecamatan', kec: 'Grujugan', kab: 'Bondowoso' },
  Tamansari: { lat: -7.855, lng: 113.805, type: 'Desa', kec: 'Grujugan', kab: 'Bondowoso' },
  'Sumber Tengah': { lat: -7.848, lng: 113.795, type: 'Desa', kec: 'Grujugan', kab: 'Bondowoso' },

  // Kecamatan Tapen
  Tapen: { lat: -7.9667, lng: 113.8833, type: 'Kecamatan', kec: 'Tapen', kab: 'Bondowoso' },
  'Tapen Tengah': { lat: -7.97, lng: 113.885, type: 'Desa', kec: 'Tapen', kab: 'Bondowoso' },
  Tegalampel: { lat: -7.965, lng: 113.88, type: 'Desa', kec: 'Tapen', kab: 'Bondowoso' },

  // Kecamatan Wonosari
  Wonosari: { lat: -7.8833, lng: 113.75, type: 'Kecamatan', kec: 'Wonosari', kab: 'Bondowoso' },
  'Sumber Anyar': { lat: -7.885, lng: 113.755, type: 'Desa', kec: 'Wonosari', kab: 'Bondowoso' },
  'Karang Melok': { lat: -7.88, lng: 113.745, type: 'Desa', kec: 'Wonosari', kab: 'Bondowoso' },

  // Kecamatan Maesan
  Maesan: { lat: -7.8333, lng: 113.8667, type: 'Kecamatan', kec: 'Maesan', kab: 'Bondowoso' },
  Andungsari: { lat: -7.835, lng: 113.87, type: 'Desa', kec: 'Maesan', kab: 'Bondowoso' },
  Pakuniran: { lat: -7.83, lng: 113.86, type: 'Desa', kec: 'Maesan', kab: 'Bondowoso' },

  // Kecamatan Prajekan
  Prajekan: { lat: -7.95, lng: 113.95, type: 'Kecamatan', kec: 'Prajekan', kab: 'Bondowoso' },
  Kalianyar: { lat: -7.955, lng: 113.955, type: 'Desa', kec: 'Prajekan', kab: 'Bondowoso' },

  // Kecamatan Tenggarang
  Tenggarang: {
    lat: -7.9833,
    lng: 113.7833,
    type: 'Kecamatan',
    kec: 'Tenggarang',
    kab: 'Bondowoso'
  },
  Blimbing: { lat: -7.985, lng: 113.785, type: 'Desa', kec: 'Tenggarang', kab: 'Bondowoso' },

  // Kecamatan Cermee
  Cermee: { lat: -7.8167, lng: 113.7167, type: 'Kecamatan', kec: 'Cermee', kab: 'Bondowoso' },
  'Cermee Kidul': { lat: -7.82, lng: 113.72, type: 'Desa', kec: 'Cermee', kab: 'Bondowoso' },

  // Kecamatan Sukosari
  Sukosari: { lat: -7.8667, lng: 113.9167, type: 'Kecamatan', kec: 'Sukosari', kab: 'Bondowoso' },
  'Sumber Wringin': { lat: -7.87, lng: 113.92, type: 'Desa', kec: 'Sukosari', kab: 'Bondowoso' },

  // Kecamatan Tlogosari
  Tlogosari: { lat: -7.9167, lng: 113.95, type: 'Kecamatan', kec: 'Tlogosari', kab: 'Bondowoso' },
  'Tlogosari Kulon': { lat: -7.92, lng: 113.955, type: 'Desa', kec: 'Tlogosari', kab: 'Bondowoso' }
}

// Helper function untuk search
export function searchLocations(query) {
  if (!query || query.length < 2) return []

  const lowerQuery = query.toLowerCase()
  const results = []

  for (const [name, data] of Object.entries(LOCATIONS_DATABASE)) {
    const lowerName = name.toLowerCase()
    const lowerKec = data.kec.toLowerCase()
    const lowerKab = data.kab.toLowerCase()

    // Check if query matches name, kecamatan, or kabupaten
    if (
      lowerName.includes(lowerQuery) ||
      lowerKec.includes(lowerQuery) ||
      lowerKab.includes(lowerQuery)
    ) {
      results.push({
        name: name,
        displayName: `${data.type} ${name}, Kec. ${data.kec}, Kab. ${data.kab}`,
        ...data
      })
    }
  }

  // Sort by relevance (exact match first, then starts with, then contains)
  results.sort((a, b) => {
    const aName = a.name.toLowerCase()
    const bName = b.name.toLowerCase()

    if (aName === lowerQuery) return -1
    if (bName === lowerQuery) return 1
    if (aName.startsWith(lowerQuery)) return -1
    if (bName.startsWith(lowerQuery)) return 1
    return 0
  })

  return results.slice(0, 10) // Return top 10 results
}

// Get location by name
export function getLocationByName(name) {
  return LOCATIONS_DATABASE[name]
}

// Original CONFIG
export const CONFIG = {
  DEFAULT_ZOOM: 13,
  MAX_ZOOM: 18,
  MIN_ZOOM: 8,
  DEFAULT_CENTER: [-7.7543, 113.2159], // Probolinggo center

  EVACUATION_POINTS: [
    {
      lat: -7.71,
      lng: 113.48,
      name: 'Balai Desa Karanganyar',
      type: 'balai_desa',
      address: 'Jl. Desa Karanganyar'
    },
    {
      lat: -7.7105,
      lng: 113.485,
      name: 'Masjid Al-Hidayah',
      type: 'masjid',
      address: 'Dusun Randutatah'
    },
    {
      lat: -7.708,
      lng: 113.482,
      name: 'SDN Karanganyar 1',
      type: 'sekolah',
      address: 'Jl. Pendidikan No. 1'
    },
    {
      lat: -7.7108,
      lng: 113.49,
      name: 'Posko BPBD Paiton',
      type: 'posko',
      address: 'Jl. Raya Paiton Km 3'
    },
    {
      lat: -7.7115,
      lng: 113.492,
      name: 'Puskesmas Paiton',
      type: 'kesehatan',
      address: 'Jl. Kesehatan No. 5'
    }
  ],

  DANGER_ZONES: [
    {
      lat: -7.712,
      lng: 113.495,
      radius: 500,
      name: 'Sungai Paiton',
      risk: 'high',
      description: 'Sungai sering meluap saat hujan deras'
    },
    {
      lat: -7.708,
      lng: 113.478,
      radius: 300,
      name: 'Area Sawah',
      risk: 'medium',
      description: 'Genangan cepat saat hujan > 2 jam'
    },
    {
      lat: -7.705,
      lng: 113.49,
      radius: 400,
      name: 'Permukiman Rendah',
      risk: 'high',
      description: 'Drainase buruk, air menggenang'
    }
  ],

  // Legacy LOCATIONS_DB for backward compatibility
  LOCATIONS_DB: LOCATIONS_DATABASE
}

export const RISK_LEVELS = {
  HIGH: {
    label: 'Tinggi',
    color: '#DC2626',
    icon: 'fas fa-exclamation-triangle',
    description: 'Area rawan banjir. Siap siaga untuk evakuasi segera.',
    percentage: 85
  },
  MEDIUM: {
    label: 'Sedang',
    color: '#F59E0B',
    icon: 'fas fa-exclamation-circle',
    description: 'Area berpotensi banjir saat hujan lebat. Waspada terhadap genangan.',
    percentage: 57
  },
  LOW: {
    label: 'Rendah',
    color: '#10B981',
    icon: 'fas fa-check-circle',
    description: 'Area relatif aman, tetap pantau kondisi cuaca.',
    percentage: 20
  }
}

export const GPS_ACCURACY_LEVELS = {
  GOOD: {
    threshold: 50,
    label: 'Tinggi',
    color: '#10B981',
    message: 'GPS Akurat'
  },
  MEDIUM: {
    threshold: 100,
    label: 'Sedang',
    color: '#F59E0B',
    message: 'GPS Cukup Baik'
  },
  POOR: {
    threshold: Infinity,
    label: 'Rendah',
    color: '#DC2626',
    message: 'GPS Perlu Perbaikan'
  }
}

export const EMERGENCY_STEPS = {
  HIGH: [
    {
      number: 1,
      title: 'Evakuasi Segera!',
      description: 'Menuju titik evakuasi terdekat dalam radius 500m',
      action: 'showRoute',
      icon: 'fas fa-directions'
    },
    {
      number: 2,
      title: 'Hubungi BPBD Setempat',
      description: 'Laporkan kondisi dan minta bantuan evakuasi',
      action: 'callEmergency',
      icon: 'fas fa-phone'
    },
    {
      number: 3,
      title: 'Siapkan Tas Darurat',
      description: 'Ambil dokumen penting dan kebutuhan darurat',
      action: 'showChecklist',
      icon: 'fas fa-list-check'
    }
  ],
  MEDIUM: [
    {
      number: 1,
      title: 'Persiapkan Evakuasi',
      description: 'Kenali rute ke titik evakuasi terdekat',
      action: 'showRoute',
      icon: 'fas fa-directions'
    },
    {
      number: 2,
      title: 'Pantau Kondisi Cuaca',
      description: 'Waspada jika hujan deras > 1 jam',
      action: 'monitorWeather',
      icon: 'fas fa-cloud-rain'
    },
    {
      number: 3,
      title: 'Siapkan Perlengkapan',
      description: 'Kemas barang penting untuk berjaga-jaga',
      action: 'showChecklist',
      icon: 'fas fa-list-check'
    }
  ],
  LOW: [
    {
      number: 1,
      title: 'Tetap Waspada',
      description: 'Pantau informasi cuaca dan peringatan dini',
      action: 'monitorWeather',
      icon: 'fas fa-bell'
    },
    {
      number: 2,
      title: 'Kenali Jalur Evakuasi',
      description: 'Pelajari rute evakuasi untuk antisipasi',
      action: 'showRoute',
      icon: 'fas fa-directions'
    },
    {
      number: 3,
      title: 'Siapkan Kontak Darurat',
      description: 'Simpan nomor penting untuk keadaan darurat',
      action: 'saveContacts',
      icon: 'fas fa-address-book'
    }
  ]
}
